---
tag: 随记
---

> 习惯类Unix系统上C编程，所以计划在macOS上学习网络编程知识，但是考虑我的2015mbp(Monterey 12) 13‘的小屏幕，外接屏幕显示效果很不好，所以考虑基于windows SSH搭建远程调试环境。



![remote development](https://code.visualstudio.com/assets/docs/remote/ssh/architecture-ssh.png)

> [!IMPORTANT]
>
> 环境与Remote OS(mac)相关，而不是你的本地OS(windows)



> ### SSH环境配置

1. 同一局域网内，要想访问Mac，[需要先配置允许远程电脑访问您的Mac](https://support.apple.com/zh-cn/guide/mac-help/mchlp1066/12.0/mac/12.0)

2. 本地OS安装Remote-SSH：VS左侧Extension图标 —> 输入 Remote-SSH —>install

   ![remote ssh install](https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20211206163014391.png)

3. 进入.ssh/config 文件配置

   ![config](https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20211206163758522.png)

4. 登陆测试

![登陆测试](https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20211206164334870.png)

@[royhuang's blog](https://hwh.zone/p/18652/)还提供了如何免密登录及文件传输方案



> ### **macOS调试环境（mac系统默认使用clang编译器及lldb调试环境，类似unix系统下的gcc与gdb）**

   

> [!NOTE]
>
> 调试过程中你可能遇到 (开发模式未开启)

```shell
process exited with status -1 (developer mode is not enabled on this machine and this is a non-interactive debug session.)
```

解决方法:

```bash
❯ sudo DevToolsSecurity -enable
Developer mode is now enabled.
```

> ### JSON自定义配置



[launch.json](https://code.visualstudio.com/docs/cpp/launch-json-reference)：自定义调试选项
c_cpp_properties.json
setting.json
[tasks.json](https://code.visualstudio.com/Docs/editor/tasks)：配置编译、打包等工具链信息



> [!CAUTION]
>
> 在本次调试中，我使用默认配置就实现了调试，进一步了解可参考vs官方文档



> ### 多文件编译

​    VS毕竟是一款编辑器，不是IDE更适合单文件，单模块编程，对于多文件可借鉴一下我的task.json配置

```json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: clang build active file",
            "command": "/usr/bin/clang",
            "args": [
                "-fcolor-diagnostics",
                "-fansi-escape-codes",
                "-g",
                //多文件路径
                "${fileDirname}/main.c",
                "${fileDirname}/func.c",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```



