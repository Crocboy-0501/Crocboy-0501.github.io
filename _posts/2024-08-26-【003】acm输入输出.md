---
tag: 随记
---

> 在考虑问题时总会把一些算法想的很复杂，最近刷到ACM模式的训练(牛客网)，总结一下c语言下常见的交互代码。
>
> 其实对于C语言输入用到了scanf(), getchar()等函数，主要操作对象是stdin的流操作。对于排序，最近新学习了qsort()快排函数，也会涉及到。

+ <span style="font-size: 50px; color: green">scanf()</span>[^ 链接]

```c
//此代码计算输入a，b的和
#include <stdio.h>
int main()
{
    int a = 0, b = 0;
    while(scanf("%d %d", &a, &b) != EOF)
    {
        printf("%d\n", a+b);
    }
}
```

###### Function

`int scanf ( const char * format, ... );`

###### 参数

format：控制从输入流中提取字符串的方式

+ **whitespace character**

  ```c
  /**
   * scanf函数在读取时会忽略掉spaces，newlines，tab字符，format中存在单个whitespace将匹配读到的任意数量的whitespace字符。
   * 输入:
   * 12     34
   * Example:
   *   int result = scanf("%d %d", &a, &b);
   * Returns:
   *   result = 2;
   *   a = 12, b = 34
   */
  ```

+ **Non-whitespace character, except format specifier** 

  ```c
  /**
   *对于非空白字符以及格式字符(%)，scanf也会去读取，如果匹配上则丢弃继续完成流读取，否则读取失败，返回成功读取个数
   * 输入:
   * 12     34
   * Example:
   *   int result = scanf("%dv%d", &a, &b);
   * Returns:
   *   result = 1;
   *   a = 12, b = -8684932
   */
  ```

+ **Format specifiers**

 ` %*[width][length]specifier`

| *specifier*  | Description          | Characters extracted                                         |
| :----------- | :------------------- | :----------------------------------------------------------- |
| `d` *or* `u` | Decimal integer      | <span style="color:red; font-size:30px;">Any number of [decimal digits](https://cplusplus.com/isdigit) (`0-9`), optionally preceded by a sign (`+` or `-`). `d` is for a *signed* argument, and `u` for an *unsigned*.</span> |
| `s`          | String of characters | <span style="color:red; font-size:30px;">Any number of non-whitespace characters, stopping at the first [whitespace](https://cplusplus.com/isspace) character found. A terminating null character is automatically added at the end of the stored sequence.</span> |

###### 返回

若读取成功，返回匹配的字符数；若遇到匹配错误，读取错误或到达EOF，则可能返回小于等于0的值，这种情况需要我们单独进行判断。

###### 案例

https://ac.nowcoder.com/acm/contest/5657/F

```c
#include <stdio.h>

int main() {
    int n;
    
    // While loop to read the number of integers to sum
    while(scanf("%d", &n) == 1) {
        if (n <= 0) {
            printf("Invalid input: n must be positive.\n");
            continue; // Skip to the next iteration for invalid input
        }
        
        int sum = 0;
        int tmp;
        
        // Loop to read and sum the next n integers
        for(int i = 0; i < n; i++) {
            if(scanf("%d", &tmp) != 1) {
                printf("Error reading input.\n");
                break; // Exit the loop if there's an input error
            }
            sum += tmp;
        }
        
        printf("%d\n", sum);
    }
    
    return 0;
}
```

https://ac.nowcoder.com/acm/contest/5657/G

```c
#include <stdio.h>
int main()
{
    int input = 0;
    int sum = 0;
    while(scanf("%d", &input) == 1)
    {
        sum += input;
        if(getchar() == '\n')
        {
            printf("%d\n", sum);
            sum = 0;
        }
    }
    return -1;
}
```

注：getchar()函数-->Returns the next character from the standard input ([stdin](https://cplusplus.com/stdin)).

https://ac.nowcoder.com/acm/contest/5657/I

```c
int compar(const void* p1, const void* p2)
{
	int ret = strcmp((char*)p1, (char*)p2);
	return ret;
}

void main(void)
{

	char arr[100][100];
	int n = 0;
	while (scanf("%s", arr[n++]) != EOF)
	{
		if (getchar() != '\n')
		{
			continue;
		}

		if (n > 1)
		{
			qsort(arr, n, sizeof(arr[0]), compar);
		}

		for (int j = 0; j < n; j++)
		{
			printf("%s ", arr[j]);
		}
		printf("\n");
		n = 0;
	}
}
```

+ # <span style="font-size: 50px; color: green">qsort(...)</span>

`void qsort (void* base, size_t num, size_t size, int (*compar)(const void*,const void*));`

###### 参数

base: 指向排序数组第一个成员的指针

num: 成员个数

size: 成员字节大小

compar: 成员大小比较回调函数(int compar (const void* p1, const void* p2))

| return value | meaning                                                      |
| :----------- | :----------------------------------------------------------- |
| `<0`         | The element pointed to by p1 goes before the element pointed to by p2 |
| `0`          | The element pointed to by p1 is equivalent to the element pointed to by p2 |
| `>0`         | The element pointed to by p1 goes after the element pointed to by p2 |

```c
//example
int compareMyType (const void * a, const void * b)
{
  if ( *(MyType*)a <  *(MyType*)b ) return -1;
  if ( *(MyType*)a == *(MyType*)b ) return 0;
  if ( *(MyType*)a >  *(MyType*)b ) return 1;
}
```



[^ 链接]: https://cplusplus.com/reference/cstdio/scanf/?kw=scanf
